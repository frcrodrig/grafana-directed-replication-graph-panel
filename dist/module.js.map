{"version":3,"sources":["../src/module.js"],"names":["config","MetricsPanelCtrl","angular","DataSet","Network","nodes","edges","GraphCtrl","$scope","$injector","$rootScope","$http","rootScope","scope","timeSrv","get","templateSrv","events","on","onDataReceived","bind","query_counter","data","options","shape","color","background","border","font","length","arrows","layout","randomSeed","autoResize","height","width","dataList","series","map","seriesHandler","console","log","new_series","series_counter","i","panel","targets","target","alias","datapoints","data_edge","label","data_node","indexOf","target_id","substring","query_value","id","value","updated","_data","add","update","subtraction","parseInt","split","opacity","e","node","remove","edge","seriesData","templateUrl","module","directive","restrict","transclude","link","element","attr","networkEvents","network","$watch","destroy","forEach","callback","event","String","onload","isFunction","$watchCollection","setOptions","factory"],"mappings":"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","file":"module.js","sourcesContent":["import config from 'app/core/config';\nimport {\n    MetricsPanelCtrl\n} from 'app/plugins/sdk';\nimport angular from 'angular';\nimport {\n    DataSet,\n    Network\n} from './external/vis.min';\n\nvar nodes = [];\nvar edges = [];\nexport class GraphCtrl extends MetricsPanelCtrl {\n    constructor($scope, $injector, $rootScope, $http) {\n        super($scope, $injector);\n        this.rootScope = $rootScope;\n        this.scope = $scope;\n        this.timeSrv = $injector.get('timeSrv');\n        this.templateSrv = $injector.get('templateSrv');\n        this.events.on('data-received', this.onDataReceived.bind(this));\n        this.query_counter;\n        nodes = new DataSet(nodes);\n        edges = new DataSet(edges);\n        var data = {\n            nodes: nodes,\n            edges: edges\n        };\n        var options = {\n            nodes: {\n                shape: 'dot',\n                color: {\n                    background: \"#ffd800\",\n                    border: \"#ff6400\"\n                },\n                font: {\n                    color: \"#fff\"\n                }\n            },\n            edges: {\n                length: 400,\n                arrows: 'to',\n                color: {\n                    color: '#ff6400'\n                }\n            },\n            layout: {\n                randomSeed: 528861\n            },\n            autoResize: true,\n            height: '100%',\n            width: '100%'\n        };\n        $scope.data = data;\n        $scope.options = options;\n    }\n\n    onDataReceived(dataList) {\n        this.query_counter = 0;\n        this.series = dataList.map(this.seriesHandler.bind(this));\n        console.log(this.series);\n        var new_series = []\n        var series_counter = 0\n        for(var i = 0; i < this.panel.targets.length; i++){\n            if(this.series[series_counter].target == this.panel.targets[i].alias){\n                new_series[i] = this.series[series_counter]\n                if(series_counter+1 < this.series.length){\n                    series_counter++;\n                }\n                \n            } else {\n                new_series[i] = {target: \"0\", datapoints: [0]};\n            }\n        }\n        this.series = new_series;\n        console.log(this.series);\n        var data_edge = {\n            label: \"\"\n        };\n        var data_node = {};\n\n        for (var i = 0; i < this.series.length; i++) {\n            try {\n                data_edge = {\n                    label: \"\"\n                };\n                data_node = {};\n                if (this.series[i].target.indexOf(\"#\") != -1) {\n                    var target_id = this.series[i].target.substring(1, this.series[i].target.length);\n                    var query_value = this.series[i].datapoints[this.series[i].datapoints.length - 1][0];\n                    data_node = {\n                        id: target_id,\n                        value: query_value,\n                        label: target_id + \"\\n\" + query_value,\n                        updated: 1\n                    }\n                    if (!(target_id in nodes._data)) {\n                        nodes.add(data_node);\n                    } else {\n                        nodes.update(data_node);\n                    }\n                }\n\n                if (this.series[i].target.indexOf(\"=\") != -1) {\n                    if (this.series[i].target.indexOf(\"*\") != -1) {\n                        this.series[i].target = this.series[i].target.substring(1, this.series[i].target.length)\n                        var subtraction = 0;\n\n                        if (this.series[i].target.indexOf(\"-\") != -1) {\n                            subtraction = this.series[parseInt(this.series[i].target.split(\"-\")[1], 10)].datapoints[this.series[i].datapoints.length - 1][0];\n                            this.series[i].target = this.series[i].target.split(\"-\")[0];\n\n                        }\n\n                        if (this.series[i].target.indexOf(\"+\") != -1) {\n                            this.series[i].target = this.series[i].target.substring(1, this.series[i].target.length);\n                            data_edge['label'] = edges.get(this.series[i].target).label + \" / \" + (this.series[i].datapoints[this.series[i].datapoints.length - 1][0] - subtraction);\n                        } else {\n                            data_edge['label'] = this.series[i].datapoints[this.series[i].datapoints.length - 1][0] - subtraction;\n                        }\n                    }\n                    data_edge['id'] = this.series[i].target;\n                    data_edge['from'] = this.series[i].target.split(\"=\")[0];\n                    data_edge['color'] = {\n                        color: '5a910a',\n                        opacity: this.series[i].datapoints[this.series[i].datapoints.length - 1][0] / 100\n                    };\n                    data_edge['to'] = this.series[i].target.split(\"=\")[1];\n                    data_edge['updated'] = 1;\n                    if (!(this.series[i].target in edges._data)) {\n                        edges.add(data_edge);\n                    } else {\n                        edges.update(data_edge);\n                    }\n\n                }\n            } catch (e) {\n\n                continue\n            }\n\n        }\n        for (var node in nodes._data) {\n            if (!(nodes._data[node].updated)) {\n                nodes.remove({\n                    id: node\n                });\n            } else {\n                nodes._data[node].updated = !nodes._data[node].updated;\n            }\n        }\n        for (var edge in edges._data) {\n            if (!(edges._data[edge].updated)) {\n                edges.remove({\n                    id: edge\n                });\n            } else {\n                edges._data[edge].updated = !edges._data[edge].updated;\n            }\n\n        }\n        console.log(edges);\n        console.log(nodes);\n        console.log(this.panel.targets)\n    }\n    seriesHandler(seriesData) {\n        console.log(seriesData);\n\n        var series = seriesData;\n        return series;\n    }\n\n}\n\n\n\nGraphCtrl.templateUrl = 'module.html';\n\nangular.module('grafana.directives')\n    .directive('visNetwork', function() {\n        return {\n            restrict: 'EA',\n            transclude: false,\n            scope: {\n                data: '=',\n                options: '=',\n                events: '='\n            },\n            link: function(scope, element, attr) {\n                var networkEvents = [\n                    'click',\n                    'doubleClick',\n                    'oncontext',\n                    'hold',\n                    'release',\n                    'selectNode',\n                    'selectEdge',\n                    'deselectNode',\n                    'deselectEdge',\n                    'dragStart',\n                    'dragging',\n                    'dragEnd',\n                    'hoverNode',\n                    'blurNode',\n                    'zoom',\n                    'showPopup',\n                    'hidePopup',\n                    'startStabilizing',\n                    'stabilizationProgress',\n                    'stabilizationIterationsDone',\n                    'stabilized',\n                    'resize',\n                    'initRedraw',\n                    'beforeDrawing',\n                    'afterDrawing',\n                    'animationFinished'\n\n                ];\n\n                var network = null;\n\n                scope.$watch('data', function() {\n                    // Sanity check\n                    if (scope.data == null) {\n                        return;\n                    }\n\n                    // If we've actually changed the data set, then recreate the graph\n                    // We can always update the data by adding more data to the existing data set\n                    if (network != null) {\n                        network.destroy();\n                    }\n\n                    // Create the graph2d object\n                    network = new Network(element[0], scope.data, scope.options);\n\n                    // Attach an event handler if defined\n                    angular.forEach(scope.events, function(callback, event) {\n                        if (networkEvents.indexOf(String(event)) >= 0) {\n                            network.on(event, callback);\n                        }\n                    });\n\n                    // onLoad callback\n                    if (scope.events != null && scope.events.onload != null &&\n                        angular.isFunction(scope.events.onload)) {\n                        scope.events.onload(network);\n                    }\n                });\n\n                scope.$watchCollection('options', function(options) {\n                    if (network == null) {\n                        return;\n                    }\n                    network.setOptions(options);\n                });\n            }\n        };\n    });\nangular.module('grafana.services')\n    .factory('VisDataSet', function() {\n        'use strict';\n        return function(data, options) {\n            // Create the new dataSets\n            return new DataSet(data, options);\n        };\n    })\n\nexport {\n    GraphCtrl as PanelCtrl\n};"]}